<div class="cart-container">
  <h2>{{ "shopping_cart" | translate }}</h2>
  <div *ngIf="cartItems.length > 0">
    <div class="row">
      <div class="col-md-9">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">{{ "item" | translate }}</th>
              <th scope="col">{{ "price" | translate }}</th>
              <th scope="col">{{ "qty" | translate }}</th>
              <th scope="col">{{ "subtotal" | translate }}</th>
              <th scope="col">{{ "action" | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of cartItems ; ">
              <td style="max-width: 300px;">
                <div style="display: flex;">
                  <!-- <img class="imageItem" [src]="item.image" width="100px" height="100px"> -->
                  <span class="productName">
                    {{getLocalizedProductName(item)}}
                  </span>
                </div>
              </td>
              <td> {{ item.price| currency }}</td>
              <td>
                <div class="quantity">
                  <i class="fa fa-angle-up" (click)="item.quantity < item.stock?increaseQuantity(item):''"></i>
                  {{item.quantity}}
                  <i class="fa fa-angle-down" [style.cursor]="item.quantity === 1 ? 'auto' : 'pointer'"
                    (click)="decreaseQuantity(item)"></i>
                </div>
                <span *ngIf="item.quantity>=item.stock" style="color: red;">  Exceeded available stock quantity. Maximum available is {{ item.stock }}.

                </span>

              </td>
              <td> {{ item.price * item.quantity |currency}}</td>
              <button (click)="removeItem(item.productId)" class="clear-cart-btn">{{ 'remove' | translate
                }}</button>
            </tr>
          </tbody>
        </table>




      </div>
      <div class="col-md-3">
        <div class="card" style="width: 100%;border: 1px solid gray; padding: 10px;">
          <div class="card-body">
            <h3 style="margin: 0;" class="card-title">Summary</h3>
            <hr style="margin: 5px;">
            <div style="display: flex;justify-content: space-between;">
              <span>subtotal</span>
              <span style="color: black;">EGP {{subTotal}}</span>
            </div>
            <hr style="margin: 5px;">
            <div style="display: flex;justify-content: space-between;">
              <h5>Order Total</h5>
              <h5 style="color: black;">EGP {{subTotal}}</h5>
            </div>
            <button class="btn btn-warning btn-block">GO TO CHECKOUT</button>
          </div>
        </div>
      </div>
    </div>
    <div class="cart-footer">
      <button (click)="clearCart()" class="clear-cart-btn">Clear Cart</button>
      <!-- <h3>Total Price: ${{ cartItems.reduce((total, item) => total + item.totalPrice, 0) }}</h3> -->
    </div>

    <div *ngIf="cartItems.length == 0">
      <p>You have no items in your shopping cart</p>
      <p>Click <a class="clickHere" routerLink="/products">here</a>
        {{ 'continue_shopping' | translate }}</p>
    </div>



    <div *ngIf="cartItems.length == 0">
      <p><span class="clickHere">{{ 'continue_shopping' | translate }}</span> </p>
    </div>
  </div>
</div>
  <div *ngIf="cartItems.length == 0">
    <p><span class="clickHere" >{{ 'continue_shopping' | translate }}</span> </p>
  </div>




<style>
  .table {
    vertical-align: middle;
  }

  .table tbody tr td {
    vertical-align: middle;
  }

  .imageItem {
    border: 1px solid gray;
    padding: 5px;
    border-radius: 10px;
  }

  .productName {
    margin-left: 10px;
    padding: 2px;
  }

  .quantity {
    display: flex;
    flex-direction: column;
  }

  .fa-angle-up,
  .fa-angle-down {
    font-size: 20px;
    cursor: pointer;
  }

  .cart-container {
    padding: 20px;
    background-color: #f9f9f9;
    border-radius: 5px;
  }

  .cart-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid #ddd;
  }

  .item-details {
    flex: 1;
  }

  .remove-btn {
   background-color: orangered;
    color: white;
    border-radius: 5px;
    padding: 10px;
    cursor: pointer;
  }

  .clear-cart-btn {
    background-color: orangered;
    color: white;
    border-radius: 5px;
    padding: 10px;
    cursor: pointer;
    background-color: #ff4d4d;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
  }

  .clear-cart-btn {
    background-color: #ff4d4d;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
  }

  .cart-footer {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
  }

  .clickHere {
    cursor: pointer;
    color: #f0ad4e;
  }
</style>
